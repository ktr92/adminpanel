<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Calendar</title>
		<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,600" rel="stylesheet">

        <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="/css/bootstrap-theme.min.css">
		<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
        <link rel="stylesheet" type="text/css" href="/libs/font-awesome-4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" href="/css/slick.css">
        <link rel="stylesheet" type="text/css" href="/css/slick-theme.css">
        <link rel="stylesheet" href="/libs/lightbox/css/lightbox.css">
		<link rel='stylesheet' href='/libs/fullcalendar/fullcalendar.min.css' />

		<link rel="stylesheet" type="text/css" href="/css/main.css?v=1.2">

        <!--[if lt IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
        <![endif]-->
    </head>
    <body>
		
		<section id="calendar-page">
			<div class="layout">
				<div class="layout-layer">
					<div class="leftcol">
						<div class="logo">logo</div>
						<div class="leftcol-sections">
							<section class="leftcol-section">
								<h3>Content</h3>
								<ul class="leftcol-links">
									<li><a href="/" class="leftcol-link" id="icon-view">Home<span></span></a></li>
									<li><a href="/scheduled-content.html" class="leftcol-link" id="icon-time">Sheduled<span></span></a></li>
									<li><a href="/tagged.html" class="leftcol-link" id="icon-email">Tagged<span></span></a></li>
									<li><a href="/feeds.html" class="leftcol-link" id="icon-board">Feeds</a></li>
								</ul>
							</section>
							<section class="leftcol-section">
								<h3>Promotion</h3>
								<ul class="leftcol-links">
									<li  class="active"><a href="/calendar.html" class="leftcol-link" id="icon-calendar">Posting Shedule<span></span></a></li>
									<li><a href="/hashtags.html" class="leftcol-link" id="icon-hashtag">Hashtags Poster<span></span></a></li>
								</ul>
							</section>
							<section class="leftcol-section">
								<h3>Accounts</h3>
								<ul class="leftcol-links">
									<li><a href="/profiles.html" class="leftcol-link" id="icon-profiles">Profiles<span></span></a></li>
									<li><a href="/accounts.html" class="leftcol-link" id="icon-inst">Instagram Accounts<span></span></a></li>
									<li><a href="/settings.html" class="leftcol-link" id="icon-settings">Settings<span></span></a></li>
								</ul>
							</section>
						</div>
					</div>
				<div class="rightcol">
					<header id="header">
						<!-- <div class="mobile-menu hidden-lg hidden-md hidden-sm visible-xs">
							<button id="btn-mobile"><i class="fa fa-bars" aria-hidden="true"></i></button>
						</div> -->
						<div class="header-panel">
							<div class="search">
								<form action="#" id="header_search">
									<input type="text" placeholder="Find everything...">
								</form>
							</div>
							<div class="myaccount">
								<div class="myaccount-notification"></div>
								<div class="myaccount-profile">
									<div class="myaccount-photo"><img src="/images/photo.png" alt=""></div>
									<div class="myaccount-name">John Doe</div>
								</div>
								<div class="myaccount-down"><img src="/images/down.png" alt=""></div>
								<div class="myaccount-dropdown">
									<ul>
										<li><a href="/settings.html">Account Settings</a></li>
										<li><a href="#">Logout</a></li>
									</ul>
								</div>
								<div class="myaccount-dropdown">
									<ul>
										<li><a href="/settings.html">Account Settings</a></li>
										<li><a href="#">Logout</a></li>
									</ul>
								</div>
							</div>
						</div>
						
						<section id="mobpanel" class="mobyes mainmenubg hidden-lg hidden-md">
						   <div class="panelwrap">
							  <button id="btn-mobile" class="butt mobaction noborder open"><i class="fa fa-bars" aria-hidden="true"></i></button>
							  <div class="panelr ">
								 <button id="mobsearch" class="butt mobaction noborder"><i class="fa fa-search" aria-hidden="true"></i></button>
							  </div>
						   </div>
						   <div class="panelsearch mainmenubg none" style="display: none;">
							  <div class="searchform">
								<div class="search">
									<form action="#" id="mheader_search">
										<input type="text" placeholder="Find everything...">
									</form>
								</div>
							  </div>
						   </div>
						   <div class="mobile-account"><div class="myaccount-photo"><a href="#"><img src="/images/photo.png" alt=""></a></div></div>
						</section>
					</header>
					<div class="maincol">
						<section id="calendar-content">
								<div class="settings">
									<div class="settings-items">
										<div class="settings-item">
											<div class="settings-header">
												<h4>Your Timezone</h4>
											</div>
											<div class="form-group">												
												<div class="country-select">
													<select>
													  <option value="volvo">USA</option>
													  <option value="saab">Other</option>
													</select>
												</div>
											</div>
										</div>
										<div class="settings-item">
											<div class="settings-header">
												<h4>Posting Presets</h4>
											</div>
											<div class="form-group">
												<div class="buttons-choose">
													<button class="button-choose left ">Low</button>
													<button class="button-choose active">Regular</button>
													<button class="button-choose right ">High</button>
												</div>
											</div>
										</div>
										<div class="settings-item">
											<div class="settings-header">
												<h4>Post Delay</h4>
											</div>
											<div class="form-group">
												<div class="postdelay">
													<input type="number" name="postdelay" value="1" min="0" max="10000" step="1">
													<select>
														<option value="volvo">min</option>
														<option value="saab">hour</option>
													</select>
													<button class="btn-main">Confirm</button>
												</div>
											</div>
										</div>
										<div class="settings-item">
											<div class="settings-remove">
												<div class="elements-container">
													<div class="settings-remove-photo"><img src="/images/remove.svg" alt=""></div>
													<div class="settings-remove-caption ">Drag times here to remove</div>
												</div>
											</div>
										</div>
										<div class="settings-item">
											<div class="roundup-emails">
												<div class="settings-header">
													<h4>Random Post Order</h4>
													<label class="checkbox">
														<input type="checkbox" name="randompostorder">
														<span></span>
													</label>
												</div>
											</div>
											<div class="roundup-emails">
												<div class="settings-header">
													<h4>Posting On/Off</h4>
													<label class="checkbox">
														<input type="checkbox" name="posting">
														<span></span>
													</label>
												</div>
											</div>
										</div>
									</div>
								</div>	
								<div class="calendar-main">
									<div id="calendar">
										<h1>Schedule Posts</h1>
										<div class="calendar-items">
											<div class="calendar-item">
												<div class="calendar-day"><span class="hidden-xs">monday</span><span class="visible-xs">mon</span></div>
												<input type="time" class="calendar-time" value="11:00">
												<input type="time" class="calendar-time" value="14:00">
												<input type="time" class="calendar-time" value="16:00">
												<input type="time" class="calendar-time" value="18:00">
												<input type="time" class="calendar-time" value="20:00">
												<input type="time" class="calendar-time" value="22:00">
												<input type="time" class="calendar-time" value="00:00">
												<div class="calendar-time-add">+</div>
											</div>										
											<div class="calendar-item">
												<div class="calendar-day"><span class="hidden-xs">tuesday</span><span class="visible-xs">tue</span></div>
												<input type="time" class="calendar-time" value="11:00">
												<input type="time" class="calendar-time" value="14:00">
												<input type="time" class="calendar-time" value="16:00">
												<input type="time" class="calendar-time" value="18:00">
												<input type="time" class="calendar-time" value="20:00">
												<input type="time" class="calendar-time" value="22:00">
												<input type="time" class="calendar-time" value="00:00">
												<div class="calendar-time-add">+</div>
											</div>
											<div class="calendar-item">
												<div class="calendar-day"><span class="hidden-xs">wednesday</span><span class="visible-xs">wed</span></div>
												<input type="time" class="calendar-time" value="11:00">
												<input type="time" class="calendar-time" value="14:00">
												<input type="time" class="calendar-time" value="16:00">
												<input type="time" class="calendar-time" value="18:00">
												<input type="time" class="calendar-time" value="20:00">
												<input type="time" class="calendar-time" value="22:00">
												<input type="time" class="calendar-time" value="00:00">
												<div class="calendar-time-add">+</div>
											</div>
											<div class="calendar-item">
												<div class="calendar-day"><span class="hidden-xs">thuersday</span><span class="visible-xs">thu</span></div>
												<input type="time" class="calendar-time" value="11:00">
												<input type="time" class="calendar-time" value="14:00">
												<input type="time" class="calendar-time" value="16:00">
												<input type="time" class="calendar-time" value="18:00">
												<input type="time" class="calendar-time" value="20:00">
												<input type="time" class="calendar-time" value="22:00">
												<input type="time" class="calendar-time" value="00:00">
												<div class="calendar-time-add">+</div>
											</div>
											<div class="calendar-item">
												<div class="calendar-day"><span class="hidden-xs">friday</span><span class="visible-xs">fri</span></div>
												<input type="time" class="calendar-time" value="11:00">
												<input type="time" class="calendar-time" value="14:00">
												<input type="time" class="calendar-time" value="16:00">
												<input type="time" class="calendar-time" value="18:00">
												<input type="time" class="calendar-time" value="20:00">
												<input type="time" class="calendar-time" value="22:00">
												<input type="time" class="calendar-time" value="00:00">
												<div class="calendar-time-add">+</div>
											</div>
											<div class="calendar-item">
												<div class="calendar-day"><span class="hidden-xs">saturday</span><span class="visible-xs">sat</span></div>
												<input type="time" class="calendar-time" value="11:00">
												<input type="time" class="calendar-time" value="14:00">
												<input type="time" class="calendar-time" value="16:00">
												<input type="time" class="calendar-time" value="18:00">
												<input type="time" class="calendar-time" value="20:00">
												<input type="time" class="calendar-time" value="22:00">
												<input type="time" class="calendar-time" value="00:00">
												<div class="calendar-time-add">+</div>
											</div>
											<div class="calendar-item">
												<div class="calendar-day"><span class="hidden-xs">sunday</span><span class="visible-xs">sun</span></div>
												<input type="time" class="calendar-time" value="11:00">
												<input type="time" class="calendar-time" value="14:00">
												<input type="time" class="calendar-time" value="16:00">
												<input type="time" class="calendar-time" value="18:00">
												<input type="time" class="calendar-time" value="20:00">
												<input type="time" class="calendar-time" value="22:00">
												<input type="time" class="calendar-time" value="00:00">
												<div class="calendar-time-add">+</div>
											</div>
										</div>
									</div>
								</div>
						</section>
					</div>
				</div>
								</div>

			</div>
			
		</section>	
        	
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/slick.min.js"></script>
        <script src="/libs/lightbox/js/lightbox.js" ></script>
        <script src="/js/maskedinput.js"></script>
		<script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
		<script src='/libs/fullcalendar/fullcalendar.js'></script>
		<script src="/js/main.js"></script>
		
		<script>
    $(function () {

        $('.external-events div').each(function () {
            
            var eventObject = {
                title: $.trim($(this).text()),
                catId: 24
            };

            // store the Event Object in the DOM element so we can get to it later
            $(this).data('eventObject', eventObject);

            // make the event draggable using jQuery UI
            $(this).draggable({
                zIndex: 999,
                revert: true,      // will cause the event to go back to its
                revertDuration: 0  //  original position after the drag
            });

        });

        /* initialize the calendar */

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        var calendar = $('#calendar').fullCalendar({
            
            events: "calanderAjax/get_events.php",

            eventRender: function (event, element) {
                element.find('.fc-title').prepend('<span>' + event.time + '</span> ');
                var a = $(element).closest('.fc-event-container').css("padding", "10px");
                console.log(a);
                $(element).css("margin", "2px");
            },

            editable: true,
            droppable: true,
            selectable: false,
            header: false,
            defaultView: 'basicWeek',
            columnFormat: 'ddd',
            firstDay: 1,
            defaultDate: moment('2017-01-08'),
            eventDurationEditable: false,
            disableResizing: true,
            dragRevertDuration: 0,
            eventOrder: "orderBy",

            drop: function (date, allDay) {

                // retrieve the dropped element's stored Event Object
                var originalEventObject = $(this).data('eventObject');
                var $extraEventClass = $(this).attr('data-class');

                // Show timepicker modal
                $('.modal').modal({ backdrop: 'static', keyboard: false })
                $('.modal').modal('show');
                $('.modal').on('shown.bs.modal', function () {
                    $(this).off('shown.bs.modal');
                    clock.clockpicker('show');
                })

                $(".modal").on("hidden.bs.modal", function () {
                    $(this).off('hidden.bs.modal');

                    originalEventObject['time'] = pickedTime;
                    var startDate = date.format('YYYY-MM-DD');
                    var endDate = startDate;
                    var day = date.format('ddd');

                    originalEventObject.start = startDate;
                    originalEventObject.end = endDate;

                    // Add to DB (get ID of inserted entry):
                    $.ajax({
                        type: 'POST',
                        url: 'calanderAjax/add_events.php',
                        dataType: 'json',
                        data: 'catId=' + originalEventObject['catId'] + '&start=' + startDate + '&end=' + endDate + '&time=' + pickedTime + '&day=' + day,
                        success: function (data) {

                            var copiedEventObject = $.extend({}, originalEventObject);

                            copiedEventObject.start = date;
                            copiedEventObject.id = data['id'];
                            if ($extraEventClass) copiedEventObject['className'] = [$extraEventClass];

                            copiedEventObject.title = '';

                            $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);
                            copiedEventObject = '';
                            originalEventObject = '';

                        }
                    });

                });

            },

            eventResize: function (event, delta) {
                updateEvent(event);
            },

            eventDrop: function (event, delta) {
                updateEvent(event);
            },

            eventDragStop: function (event, jsEvent) {

                var trashEl = jQuery('#calendarTrash');
                var ofs = trashEl.offset();

                var x1 = ofs.left;
                var x2 = ofs.left + trashEl.outerWidth(true);
                var y1 = ofs.top;
                var y2 = ofs.top + trashEl.outerHeight(true);

                if (jsEvent.pageX >= x1 && jsEvent.pageX <= x2 &&
                    jsEvent.pageY >= y1 && jsEvent.pageY <= y2) {
                    $('#calendar').fullCalendar('removeEvents', event._id);
                    $('#calendarTrash').addClass('animated tada');
                    setTimeout(function () {
                        $('#calendarTrash').removeClass('animated tada');
                    }, 1500);

                    var posting = $.post('calanderAjax/remove_event.php', { id: event.id });

                }

            },

        });

        $('#calendar').fullCalendar('gotoDate', moment('2017-01-08'));

    });
</script>

       
    </body>
</html>